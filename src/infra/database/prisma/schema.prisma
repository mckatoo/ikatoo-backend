// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["referentialIntegrity"]
}

datasource db {
  provider             = "mysql"
  url                  = env("DATABASE_URL")
  referentialIntegrity = "prisma"
}

model Skill {
  name         String      @unique
  rankPercent  Float       @default(value: 0)
  aboutPageId  String
  about        AboutPage   @relation(fields: [aboutPageId], references: [id])
  SkillsPage   SkillsPage? @relation(fields: [skillsPageId], references: [id])
  skillsPageId String?

  @@index([skillsPageId])

  @@map("skills")
}

model AboutPage {
  id          String  @id @default(uuid())
  title       String?
  description String
  image       Json?
  skills      Skill[]

  @@map("about_page")
}

model Job {
  id             String      @id @default(uuid())
  yearMonthStart String
  yearMonthEnd   String?
  jobTitle       String
  jobDescription String
  SkillsPage     SkillsPage? @relation(fields: [skillsPageId], references: [id])
  skillsPageId   String?

  @@index([skillsPageId])

  @@map("jobs")
}

model SkillsPage {
  id          String  @id @default(uuid())
  title       String
  description String
  skills      Skill[]
  jobs        Job[]

  @@map("skills_page")
}

model Localization {
  id            String        @id @default(uuid())
  latitude      Float
  longitude     Float
  contactPageId String?
  ContactPage   ContactPage[]

  @@index([contactPageId])

  @@map("localization")
}

model ContactPage {
  id             String        @id @default(uuid())
  title          String
  description    String
  localization   Localization? @relation(fields: [localizationId], references: [id])
  localizationId String

  @@index([localizationId])

  @@map("contact_page")
}

model Cards {
  id             String        @id @default(uuid())
  title          String
  subTitle       String?
  content        String
  ProjectsPage   ProjectsPage? @relation(fields: [projectsPageId], references: [id])
  projectsPageId String?

  @@index([projectsPageId])

  @@map("cards")
}

model ProjectsPage {
  id          String  @id @default(uuid())
  snapshot    String
  description Cards[]
  githubLink  String?

  @@map("projects_page")
}

model User {
  id       String @id @default(uuid())
  name     String
  username String @unique
  password String

  @@map("users")
}
